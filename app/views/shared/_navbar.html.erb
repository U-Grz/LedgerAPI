<!-- Navigation Links -->
<div class="flex items-center space-x-4">
  <%= link_to "Dashboard", dashboard_path, 
      class: "text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition" %>
  
  <%= link_to "Transactions", transactions_path, 
      class: "text-gray-700 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium transition" %>
  
  <!-- DEBUG: Remove after testing -->
  <div class="text-xs bg-yellow-200 p-2 rounded">
    subscription present: <%= current_user.subscription.present? %><br>
    subscribed?: <%= current_user.subscribed? %>
  </div>
  
  <% begin %>
    <% if current_user.subscription.present? && current_user.subscribed? %>
      <%= link_to subscription_path, class: "flex items-center space-x-1 text-indigo-600 px-3 py-2 rounded-md text-sm font-medium" do %>
        <span>⭐</span>
        <span class="font-bold"><%= current_user.subscription.plan.capitalize %></span>
      <% end %>
    <% else %>
      <%= link_to new_subscription_path, class: "bg-gradient-to-r from-indigo-600 to-purple-600 text-white px-4 py-2 rounded-lg text-sm font-bold hover:from-indigo-700 hover:to-purple-700 transition flex items-center space-x-1" do %>
        <span>✨</span>
        <span>Upgrade to Pro</span>
      <% end %>
    <% end %>
  <% rescue => e %>
    <div class="text-xs bg-red-200 p-2 rounded">
      ERROR: <%= e.message %>
    </div>
  <% end %>
  
  <!-- User Menu -->
  <div class="border-l border-gray-300 pl-4 ml-4 flex items-center space-x-4">
    <span class="text-gray-700 text-sm">
      <%= current_user.name %>
    </span>
    
    <%= button_to "Logout", logout_path, 
        method: :delete,
        class: "bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium transition" %>
  </div>
</div>